<div class="row">

    <div class="col-md-12">
        <div class="box box box-primary" style="padding-bottom: 3px">
            <div class="box-header with-border">
                <i class="fa fa-heartbeat"></i>
                <h3 class="box-title"><b>aRMS Flow Chart</b></h3>

                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i>
                    </button>
                </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-md-1" style="background: url('../dist/img/arms-process/pdservice01.png'); background-size: 100px 140px; background-repeat: no-repeat; background-position: center; height: 140px; text-align: center;">
                            <div class="font12" style="padding-top: 70px; font-weight: 900">aRMS<br>제품<br>(서비스)<br>등록</div>
                        </div>
                        <div class="col-md-1" style="background: url('../dist/img/arms-process/pdservice02.png'); background-size: 100px 140px; background-repeat: no-repeat; background-position: center; height: 140px; text-align: center;">
                            <div class="font12" style="padding-top: 70px; font-weight: 900">제품➞<br>➞JIRA<br>연결</div>
                        </div>
                        <div class="col-md-1" style="background: url('../dist/img/arms-process/pdservice03.png'); background-size: 100px 140px; background-repeat: no-repeat; background-position: center; height: 140px; text-align: center;">
                            <div class="font12" style="padding-top: 70px; font-weight: 900">제품<br>선택<br></div>
                        </div>
                        <div class="col-md-1" style="background: url('../dist/img/arms-process/pdservice00.png'); background-size: 100px 140px; background-repeat: no-repeat; background-position: center; height: 140px; text-align: center;">
                        </div>
                        <div class="col-md-1" style="background: url('../dist/img/arms-process/pdservice04.png'); background-size: 100px 140px; background-repeat: no-repeat; background-position: center; height: 140px; text-align: center;">
                            <div class="font12" style="padding-top: 70px; font-weight: 900">제품<br>요구사항<br>등록<br>변경</div>
                        </div>
                        <div class="col-md-1" style="background: url('../dist/img/arms-process/pdservice05.png'); background-size: 100px 140px; background-repeat: no-repeat; background-position: center; height: 140px; text-align: center;">
                            <div class="font12" style="padding-top: 70px; font-weight: 900">제품<br>요구사항<br>리뷰<br>승인</div>
                        </div>
                        <div class="col-md-1" style="background: url('../dist/img/arms-process/pdservice06.png'); background-size: 100px 140px; background-repeat: no-repeat; background-position: center; height: 140px; text-align: center;">
                            <div class="font12" style="padding-top: 70px; font-weight: 900">제품➞<br>➞JIRA<br><span class="font12">요구사항 전파</span></div>
                        </div>
                        <div class="col-md-1" style="background: url('../dist/img/arms-process/pdservice07.png'); background-size: 100px 140px; background-repeat: no-repeat; background-position: center; height: 140px; text-align: center;">
                            <div class="font12" style="padding-top: 70px; font-weight: 900">JIRA Project<br>Working!<br></div>
                        </div>
                        <div class="col-md-1" style="background: url('../dist/img/arms-process/pdservice00.png'); background-size: 100px 140px; background-repeat: no-repeat; background-position: center; height: 140px; text-align: center;">
                        </div>
                        <div class="col-md-1" style="background: url('../dist/img/arms-process/pdservice08.png'); background-size: 100px 140px; background-repeat: no-repeat; background-position: center; height: 140px; text-align: center;">
                            <div class="font12" style="padding-top: 70px; font-weight: 900">JIRA➞<br>➞제품<br>데이터<br>수집</div>
                        </div>
                        <div class="col-md-1" style="background: url('../dist/img/arms-process/pdservice09.png'); background-size: 100px 140px; background-repeat: no-repeat; background-position: center; height: 140px; text-align: center;">
                            <div class="font12" style="padding-top: 70px; font-weight: 900">JIRA➞<br>➞제품<br>데이터<br>분석</div>
                        </div>
                        <div class="col-md-1" style="background: url('../dist/img/arms-process/pdservice10.png'); background-size: 100px 140px; background-repeat: no-repeat; background-position: center; height: 140px; text-align: center;">
                            <div class="font12" style="padding-top: 70px; font-weight: 900">JIRA➞<br>➞제품<br>분석<br>리포트</div>
                            <img class="img-responsive" style="display: block; margin: 0px auto; margin-top: -155px" src="../dist/img/round.gif">
                        </div>

                    </div>
                </div>
                <!-- /.row -->
            </div>
            <!-- ./box-body -->
        </div>
    </div>
    <!-- col-md-12 -->
</div>
<!-- /.row -->

    <div class="row font13" style="padding-top: 10px; border-top: 2px dotted #3c8dbc;">
        <div class="col-md-3">

            <div class="box box-primary">
                <div class="box-header with-border">
                    <i class="fa fa-balance-scale"></i>
                    <h3 class="box-title"><span style="font-size: 14px"><b>제품(서비스)</b></span></h3>

                    <div class="box-tools">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                        </button>
                    </div>
                </div>
                <div class="box-body no-padding">
                    <ul class="nav nav-pills nav-stacked font13">
                        <div class="font12">
                            <div id="mmenu">
                                <!--
                                <button type="button" id="add_folder">
                                    <i class="fa fa-plus"></i>
                                    add folder
                                </button>
                                <button type="button" id="add_default">
                                    <i class="fa fa-plus"></i>
                                    add file
                                </button>
                                <button type="button" id="rename">
                                    <i class="fa fa-eraser"></i>
                                    rename
                                </button>
                                <button type="button" id="remove">
                                    <i class="fa fa-minus"></i>
                                    remove
                                </button>
                                <button type="button" id="cut">
                                    <i class="fa fa-cut"></i>
                                    cut
                                </button>
                                <button type="button" id="copy">
                                    <i class="fa fa-copy"></i>
                                    copy
                                </button>
                                <button type="button" id="paste">
                                    <i class="fa fa-paste"></i>
                                    paste
                                </button>
                                <button type="button" id="refresh" title="refresh" onclick="$('#demo').jstree('refresh',-1);">
                                    <i class="fa fa-search"></i>
                                    refresh
                                </button>
                                -->
                                <input type="text" id="text" placeholder="찾을 노드 이름 입력" data-tooltip="Press Enter To Node To Search" />
                                <button type="button" id="search" title="Search">
                                    <i class="fa fa-search"></i>
                                    Search
                                </button>
                            </div>
                            <div id="demo"></div>
                        </div>
                    </ul>
                    <br>
                    <a href="ARMS-req-regist.html" class="btn btn-primary btn-block margin-bottom font13">제품 & 서비스 선택완료</a>
                </div>
                <!-- /.box-body -->
            </div>

            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title"><span class="font13">서비스 & 제품 버전 선택</h3>

                    <div class="box-tools">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                        </button>
                    </div>
                </div>
                <div class="box-body no-padding">
                    <ul class="control-sidebar-menu">
                        <li>
                            <a href="javascript:void(0)">
                                <h4 class="custom-control-sidebar-subheading">
                                    SK Hynix aRMS 1.0.1-RELEASE
                                    <span class="label label-danger pull-right">70%</span>
                                </h4>

                                <div class="progress progress-xxs">
                                    <div class="progress-bar progress-bar-danger" style="width: 70%"></div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)">
                                <h4 class="custom-control-sidebar-subheading">
                                    Samsung SDS aRMS 1.0.3-RELEASE
                                    <span class="label label-success pull-right">95%</span>
                                </h4>

                                <div class="progress progress-xxs">
                                    <div class="progress-bar progress-bar-success" style="width: 95%"></div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)">
                                <h4 class="custom-control-sidebar-subheading">
                                    aRMS Core 1.0.7-SNAPSHOT
                                    <span class="label label-warning pull-right">50%</span>
                                </h4>

                                <div class="progress progress-xxs">
                                    <div class="progress-bar progress-bar-warning" style="width: 50%"></div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)">
                                <h4 class="custom-control-sidebar-subheading">
                                    aRMS Atlassian Sell 3.1.3-SNAPSHOT
                                    <span class="label label-primary pull-right">68%</span>
                                </h4>

                                <div class="progress progress-xxs">
                                    <div class="progress-bar progress-bar-primary" style="width: 68%"></div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- /.box-body -->
            </div>
            <!-- /. box -->
            <!-- /. box -->
        </div>
        <script type="text/javascript">
            function jsTreeBuild(){

                console.log("href: "+$(location).attr('href'));
                console.log("protocol: "+$(location).attr('protocol'));
                console.log("host: "+$(location).attr('host'));
                console.log("pathname: "+$(location).attr('pathname'));
                console.log("search: "+$(location).attr('search'));
                console.log("hostname: "+$(location).attr('hostname'));
                console.log("port: "+$(location).attr('port'));

                var isDevelopingToRoute = "";

                //operation enviorment setup and local development configuration
                if($(location).attr('port') == 9999){
                    console.log("csrf 우회 because local development");
                    isDevelopingToRoute = "http://localhost:8082"
                }else{
                    $.ajax({
                        async: false,
                        type: 'GET',
                        url: "/api/jsTreeServiceFramework/security/csrf.do",
                        success: function(r) {
                            var token = r._csrf_token;
                            var header = r._csrf_headerName;
                            $(document).ajaxSend(function(e, xhr, options) {
                                xhr.setRequestHeader(header, token);
                            });
                        }
                    });
                }

                $("#demo").bind(
                    "before.jstree",
                    function(e, data) {
                        $("#alog").append(data.func + "<br />");
                        $("li:not([rel='drive']).jstree-open > a > .jstree-icon").css('background-image',
                            'url(../dist/js/jstree-v.pre1.0/themes/toolbar_open.png)');
                        $("li:not([rel='drive']).jstree-closed > a > .jstree-icon").css('background-image',
                            'url(../dist/js/jstree-v.pre1.0/themes/ic_explorer.png)');
                    }).jstree({
                    // List of active plugins
                    "plugins": ["themes", "json_data", "ui", "crrm", "cookies", "dnd", "search", "types", "hotkeys", "contextmenu", "checkbox"],

                    //contextmenu
                    "contextmenu": {
                        items: { // Could be a function that should return an object like this one
                            "create": {
                                "separator_before": true,
                                "separator_after": true,
                                "label": "Create",
                                "action": false,
                                "submenu": {
                                    "create_file": {
                                        "seperator_before": false,
                                        "seperator_after": false,
                                        "label": "File",
                                        action: function(obj) {
                                            this.create(obj, "last", {
                                                "attr": {
                                                    "rel": "default"
                                                }
                                            });
                                        }
                                    },
                                    "create_folder": {
                                        "seperator_before": false,
                                        "seperator_after": false,
                                        "label": "Folder",
                                        action: function(obj) {
                                            this.create(obj, "last", {
                                                "attr": {
                                                    "rel": "folder"
                                                }
                                            });
                                        }
                                    }

                                }
                            },
                            "ccp": {
                                "separator_before": false,
                                "separator_after": true,
                                "label": "Edit",
                                "action": false,
                                "submenu": {
                                    "cut": {
                                        "seperator_before": false,
                                        "seperator_after": false,
                                        "label": "Cut",
                                        action: function(obj) {
                                            this.cut(obj, "last", {
                                                "attr": {
                                                    "rel": "default"
                                                }
                                            });
                                        }
                                    },
                                    "paste": {
                                        "seperator_before": false,
                                        "seperator_after": false,
                                        "label": "Paste",
                                        action: function(obj) {
                                            this.paste(obj, "last", {
                                                "attr": {
                                                    "rel": "folder"
                                                }
                                            });
                                        }
                                    },

                                    "changeType": {
                                        "seperator_before": false,
                                        "seperator_after": false,
                                        "label": "Change Type",
                                        "submenu": {
                                            "toFile": {
                                                "seperator_before": false,
                                                "seperator_after": false,
                                                "label": "toFile",
                                                action: function(obj) {
                                                    this.set_type("default");
                                                }
                                            },
                                            "toFolder": {
                                                "seperator_before": false,
                                                "seperator_after": false,
                                                "label": "toFolder",
                                                action: function(obj) {
                                                    this.set_type("folder");
                                                }
                                            }
                                        }
                                    }

                                }
                            }

                        }
                    },

                    // I usually configure the plugin that handles the data first
                    // This example uses JSON as it is most common
                    "json_data": {
                        // This tree is ajax enabled - as this is most common, and maybe a bit more complex
                        // All the options are almost the same as jQuery's AJAX (read the docs)
                        "ajax": {
                            // the URL to fetch the data
                            "url": isDevelopingToRoute + "/com/ext/jstree/springiBatis/core/getChildNode.do",
                            // the `data` function is executed in the instance's scope
                            // the parameter is the node being loaded
                            // (may be -1, 0, or undefined when loading the root nodes)
                            "data": function(n) {
                                // the result is fed to the AJAX request `data` option
                                return {
                                    "c_id": n.attr ? n.attr("id").replace("node_", "").replace("copy_", "") : 1
                                };
                            },
                            "success": function(n) {
                                jSuccess('access good');
                            }
                        }
                    },
                    // Configuring the search plugin
                    "search": {
                        // As this has been a common question - async search
                        // Same as above - the `ajax` config option is actually jQuery's AJAX object
                        "ajax": {
                            "url": isDevelopingToRoute + "/com/ext/jstree/springiBatis/core/searchNode.do",
                            // You get the search string as a parameter
                            "data": function(str) {
                                return {
                                    "searchString": str
                                };
                            },
                            "success": function(n) {
                                jSuccess('search data complete');
                            }
                        }
                    },
                    // Using types - most of the time this is an overkill
                    // read the docs carefully to decide whether you need types
                    "types": {
                        // I set both options to -2, as I do not need depth and children count checking
                        // Those two checks may slow jstree a lot, so use only when needed
                        "max_depth": -2,
                        "max_children": -2,
                        // I want only `drive` nodes to be root nodes
                        // This will prevent moving or creating any other type as a root node
                        "valid_children": ["drive"],
                        "types": {
                            // The default type
                            "default": {
                                // I want this type to have no children (so only leaf nodes)
                                // In my case - those are files
                                "valid_children": "none",
                                // If we specify an icon for the default type it WILL OVERRIDE the theme icons
                                "icon": {
                                    "image": "../dist/js/jstree-v.pre1.0/themes/attibutes.png"
                                }
                            },
                            // The `folder` type
                            "folder": {
                                // can have files and other folders inside of it, but NOT `drive` nodes
                                "valid_children": ["default", "folder"],
                                "icon": {
                                    "image": "../dist/js/jstree-v.pre1.0/themes/ic_explorer.png"
                                }
                            },
                            // The `drive` nodes
                            "drive": {
                                // can have files and folders inside, but NOT other `drive` nodes
                                "valid_children": ["default", "folder"],
                                "icon": {
                                    "image": "../dist/js/jstree-v.pre1.0/themes/home.png"
                                },
                                // those prevent the functions with the same name to be used on `drive` nodes
                                // internally the `before` event is used
                                "start_drag": false,
                                "move_node": false,
                                "delete_node": false,
                                "remove": false
                            }
                        }
                    },
                    // UI & core - the nodes to initially select and open will be overwritten by the cookie plugin

                    // the UI plugin - it handles selecting/deselecting/hovering nodes
                    "ui": {
                        // this makes the node with ID node_4 selected onload
                        "initially_select": ["node_4"]
                    },
                    // the core plugin - not many options here
                    "core": {
                        // just open those two nodes up
                        // as this is an AJAX enabled tree, both will be downloaded from the server
                        "initially_open": ["node_2", "node_3"]
                    }
                }).bind("create.jstree", function(e, data) {
                    $.post("/com/ext/jstree/springiBatis/core/addNode.do", {
                        "ref": data.rslt.parent.attr("id").replace("node_", "").replace("copy_", ""),
                        "c_position": data.rslt.position,
                        "c_title": data.rslt.name,
                        "c_type": data.rslt.obj.attr("rel")
                    }, function(r) {
                        if (r.status) {
                            $(data.rslt.obj).attr("id", "node_" + r.id);
                            jNotify('Notification : <strong>Add Node</strong>, Complete !');
                        } else {
                            $.jstree.rollback(data.rlbk);
                        }
                        if (typeof Chat != "undefined"){
                            Chat.sendMessage("노드를 추가했습니다. 추가된 노드의 아이디는 " + r.id , function(data) {
                                console.log(data);
                            });
                        }
                        jstreeDataTableReload();
                        jsTreeBuild();
                    });
                }).bind("remove.jstree", function(e, data) {
                    data.rslt.obj.each(function() {
                        $.ajax({
                            async: false,
                            type: 'POST',
                            url: "/com/ext/jstree/springiBatis/core/removeNode.do",
                            data: {
                                "c_id": this.id.replace("node_", "").replace("copy_", "")
                            },
                            success: function(r) {
                                jNotify('Notification : <strong>Remove Node</strong>, Complete !');
                                if (typeof Chat != "undefined"){
                                    Chat.sendMessage("노드를 삭제했습니다. 삭제된 노드의 아이디는 " + r.c_id , function(data) {
                                        console.log(data);
                                    });
                                }
                                jstreeDataTableReload();
                                jsTreeBuild();
                            }
                        });
                    });
                }).bind("rename.jstree", function(e, data) {
                    $.post("/com/ext/jstree/springiBatis/core/alterNode.do", {
                        "c_id": data.rslt.obj.attr("id").replace("node_", "").replace("copy_", ""),
                        "c_title": data.rslt.new_name,
                        "c_type": data.rslt.obj.attr("rel")
                    }, function(r) {
                        if (!r.status) {
                            $.jstree.rollback(data.rlbk);
                        }
                        jSuccess('Rename Node Complete');
                        if (typeof Chat != "undefined"){
                            Chat.sendMessage("노드를 변경했습니다. 변경된 노드의 아이디는 " + r.c_id , function(data) {
                                console.log(data);
                            });
                        }
                        jstreeDataTableReload();
                        jsTreeBuild();
                    });
                }).bind("set_type.jstree", function(e, data) {
                    $.post("/com/ext/jstree/springiBatis/core/alterNodeType.do", {
                        "c_id": data.rslt.obj.attr("id").replace("node_", "").replace("copy_", ""),
                        "c_title": data.rslt.new_name,
                        "c_type": data.rslt.obj.attr("rel")
                    }, function(r) {
                        jSuccess('Node Type Change');
                        if (typeof Chat != "undefined"){
                            Chat.sendMessage("노드를 변경했습니다. 변경된 노드의 아이디는 " + r.c_id , function(data) {
                                console.log(data);
                            });
                        }
                        jstreeDataTableReload();
                        jsTreeBuild();
                    });
                }).bind("move_node.jstree", function(e, data) {
                    data.rslt.o.each(function(i) {
                        $.ajax({
                            async: false,
                            type: 'POST',
                            url: "/com/ext/jstree/springiBatis/core/moveNode.do",
                            data: {
                                "c_id": $(this).attr("id").replace("node_", "").replace("copy_", ""),
                                "ref": data.rslt.cr === -1 ? 1 : data.rslt.np.attr("id").replace("node_", "").replace("copy_", ""),
                                "c_position": data.rslt.cp + i,
                                "c_title": data.rslt.name,
                                "copy": data.rslt.cy ? 1 : 0,
                                "multiCounter": i
                            },
                            success: function(r) {
                                if (r.status) {
                                    $.jstree.rollback(data.rlbk);
                                } else {
                                    $(data.rslt.oc).attr("id", "node_" + r.id);
                                    if (data.rslt.cy && $(data.rslt.oc).children("UL").length) {
                                        data.inst.refresh(data.inst._get_parent(data.rslt.oc));
                                    }
                                }
                                jNotify('Notification : <strong>Move Node</strong> Complete !');
                                if (typeof Chat != "undefined"){
                                    Chat.sendMessage("노드가 이동되었습니다. 이동된 노드의 아이디는 " + r.c_id , function(data) {
                                        console.log(data);
                                    });
                                }
                                jstreeDataTableReload();
                                jsTreeBuild();
                            }
                        });
                    });
                }).bind("select_node.jstree", function (event, data) {
                    // `data.rslt.obj` is the jquery extended node that was clicked
                    if ($.isFunction(jsTreeClick)) {
                        console.log(data.rslt.obj);
                        jsTreeClick(data.rslt.obj.attr("id"));
                    }
                });

                $("#mmenu input, #mmenu button").click(function() {
                    switch (this.id) {
                        case "add_default":
                        case "add_folder":
                            $("#demo").jstree("create", null, "last", {
                                "attr": {
                                    "rel": this.id.toString().replace("add_", "")
                                }
                            });
                            break;
                        case "search":
                            $("#demo").jstree("search", document.getElementById("text").value);
                            //$("#jstreeTable_filter").find('input[type="search"]').val();
                            $('#jstreeTable').DataTable().column(6).search(document.getElementById("text").value).draw();
                            break;
                        case "text":
                            break;
                        default:
                            $("#demo").jstree(this.id);
                            break;
                    }
                });
            }

            $(function() {
                jsTreeBuild();
            });
            // Code for the menu buttons
        </script>
        <!-- /.col -->
        <div class="col-md-9">
            <div class="box box-primary">

                <div class="box-header with-border">
                    <h3 class="box-title font13">제품(서비스) - 요구사항 진척도</h3>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <div class="row">
                        <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
                    </div>
                    <div class="row">

                        <div class="container">

                            <div class="row text-right">
                                <div class="span8 offset2">
                                    <div id="radio">
                                        <span>정렬기준</span>
                                        <input type="radio" id="radio3" name="radio" value="forest"><label for="radio3">산림면적</label>
                                        <input type="radio" id="radio1" name="radio" value="forestPercentage" checked><label for="radio1">산림율</label>
                                        <input type="radio" id="radio2" name="radio" value="land"><label for="radio2">국토면적</label>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div id="chart-container" class="span8 offset2"></div>
                                <div id="oldie-chart-image" class="span8 offset2">
                                    <img src="assets/images/chart1.png" alt="산림면적 기준으로 정렬된 차트" class="forest">
                                    <img src="assets/images/chart2.png" alt="산림율 기준으로 정렬된 차트" class="forestPercentage">
                                    <img src="assets/images/chart3.png" alt="국토면적 기준으로 정렬된 차트" class="land">
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
                <!-- /.box-body -->

            </div>
            <!-- /. box -->
        </div>
        <!-- /.col -->
    </div>
    <!-- /.row -->
<script>
    function addCommas(nStr) {
        nStr += '';
        x = nStr.split('.');
        x1 = x[0];
        x2 = x.length > 1 ? '.' + x[1] : '';
        var rgx = /(\d+)(\d{3})/;
        while (rgx.test(x1)) {
            x1 = x1.replace(rgx, '$1' + ',' + '$2');
        }
        return x1 + x2;
    }

    function getInternetExplorerVersion()
    {
        var rv = -1; // Return value assumes failure.
        if (navigator.appName == 'Microsoft Internet Explorer')
        {
            var ua = navigator.userAgent;
            var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
            if (re.exec(ua) != null)
                rv = parseFloat( RegExp.$1 );
        }
        return rv;
    }

    (function($) {

        var oldIE = false;
        ieVersion = getInternetExplorerVersion();

        if (ieVersion > 0 && ieVersion < 9) {
            oldIE = true;
        }

        $(function() {

            var chartContainer = $('#chart-container'),
                oldIEChartContainer = $('#oldie-chart-image'),
                forestColor = '#2CA25F',
                notForestColor = '#E5F5F9',
                maxRadius = 60,
                padding = 20,
                padding2 = 0,
                width = 0,
                height = 0,
                html = '',
                chartBox;

            $('#radio').buttonset();

            $('#radio').find('input').on('click', function() {
                var value = this.value

                if ( ! oldIE) {
                    chartContainer.children('.chart-box').each(function() {
                        chartBox = $(this);

                        switch (value) {
                            case 'forestPercentage':
                                chartBox.find('.detail').text(chartBox.data('forest_percentage'));
                                break;

                            case 'land':
                                chartBox.find('.detail').text(chartBox.data('land_formatted'));
                                break;

                            case 'forest':
                                chartBox.find('.detail').text(chartBox.data('forest_formatted'));
                                break;
                        }
                    });

                    chartContainer.isotope({ sortBy : this.value });
                } else {
                    oldIEChartContainer.find('img').hide();
                    oldIEChartContainer.find('.' + value).show();
                }
            });

            if (oldIE) {
                oldIEChartContainer.find('.forestPercentage').show();
                return;
            }

            $.ajax({
                url: 'http://www.a-rms.net/dist/js/pages/forest_rate.json',
                dataType: 'json',
                success: function(data) {
                    var items = data.items,
                        maxLand = 0;

                    items.sort(function(a, b) {
                        return b.land - a.land;
                    });
                    maxLand = items[0].land;

                    $.each(items, function(i) {
                        this.notForest = this.land - this.forest;
                        this.forestPercentage = (this.forest / this.land * 100).toFixed(1);
                        this.notForestPercentage = (100 - this.forestPercentage).toFixed(1);
                        this.forestFormatted = addCommas(this.forest);
                        this.landFormatted = addCommas(this.land);

                        radius = parseInt((Math.sqrt(this.land) / Math.sqrt(maxLand)) * maxRadius, 10) + padding;
                        padding2 = maxRadius - radius + padding;

                        html = '<div id="chart-box-' + (i + 1) + '" class="chart-box" data-land_formatted="' + this.landFormatted + 'ha" data-forest_formatted="' + this.forestFormatted + 'ha" data-forest_percentage="' + this.forestPercentage + '%">';
                        html += '<h2 style="top:' + padding2 + 'px;">' + this.location + '</h2>';
                        html += '<p class="land hidden">' + this.land + '</p>';
                        html += '<p class="forest hidden">' + this.forest + '</p>';
                        html += '<p class="forest-percentage hidden">' + this.forestPercentage + '</p>';
                        html += '<canvas id="chart-' + (i + 1) + '" class="chart" width="' + (radius * 2) + '" height="' + (radius * 2) + '" style="margin-top:-' + radius + 'px; margin-left:-' + radius + 'px;"></canvas>';
                        html += '<p class="detail" style="bottom:' + padding2 + 'px;">' + this.forestPercentage + '%</p>';
                        html += '</div>';

                        chartContainer.append(html);

                        new Chart(document.getElementById('chart-' + (i + 1)).getContext('2d')).Pie([
                            {
                                value: +(this.notForest),
                                color: notForestColor
                            },
                            {
                                value: +(this.forest),
                                color: forestColor
                            }
                        ]);

                    });

                    $('#chart-container').isotope({
                        itemSelector : '.chart-box',
                        sortBy : 'forestPercentage',
                        sortAscending : false,
                        layoutMode : 'masonry',
                        animationEngine: 'jquery',
                        getSortData : {
                            land : function ( $elem ) {
                                return parseInt($elem.find('.land').text(), 10);
                            },
                            forest : function ( $elem ) {
                                return parseInt($elem.find('.forest').text(), 10);
                            },
                            forestPercentage : function ( $elem ) {
                                return (+$elem.find('.forest-percentage').text()).toFixed(1);
                            }
                        }
                    });

                    $('.chart').show();
                }
            });

        });

    })(window.jQuery);
</script>
<script>
    //<![CDATA[
    // Specify all properties here:
    var MIN = 0;
    var MAX = 100;
    var VALUES_WHITE = [20, 20, 20, 20, 20];
    var VALUES = [50, 30, 40, 95, 35];
    var COLORS = ['#1FFFF0', '#FFCD05', '#68EB05', '#EB13EB', '#A7EB09'];
    var CATEGORIES = ['REQ-AUTH-13', 'REQ-BACK-09', 'REQ-DESIGN-33', 'REQ-FRONT-93', 'REQ-OPER-33'];
    var BORDERWIDTH_CHART_1 = 20;
    var BORDER_COLOR = 'rgba(255, 255, 255, 1)';
    var OFFSET_ANGLE_CHART_2 = BORDERWIDTH_CHART_1/4;

    // Code starts here:
    var options = {
        chart: {
            renderTo: 'container',
            backgroundColor:'rgba(255, 255, 255, 1)',
        },
        title: {
            text: 'There you go good sir:',
            style: {"color": "#FFFFFF", "fontFamily":"Consolas"},
        },
        tooltip: {
            formatter: function() {
                var s;
                if (this.point.name == 'Slice') { // the pie chart
                    return false;
                } else {
                    s = ''+
                        this.point.name;
                }
                return s;
            }
        },
        series: [{
            type: 'pie',
            name: 'background',
            data: VALUES_WHITE,
            enableMouseTracking: false,
            borderColor: BORDER_COLOR,
            borderWidth: BORDERWIDTH_CHART_1,
            innerSize: '50%',
            size: '80%',
            colors: ['blue'],
            dataLabels: false,
            center: [350, 150],
        }]
    };

    var arrayLength = VALUES.length;

    for (var i = 0; i < arrayLength; i++) {
        var perc  = (VALUES[i]-MIN)/(MAX-MIN);
        var ratio = (VALUES[i]-MIN)/(MAX-MIN + 4*OFFSET_ANGLE_CHART_2);
        var begin = OFFSET_ANGLE_CHART_2+(360/VALUES.length)*i;
        var end   = OFFSET_ANGLE_CHART_2+(360/VALUES.length)*i + ratio*(360/VALUES.length);
        var color = [COLORS[i]];
        var label = CATEGORIES[i] + ' (' + perc*100 + '%)';
        var value = perc*100;

        options.series.push({
            type: 'pie',
            name: 'foreground',
            cumulative: 1,
            data: [{
                name: label,
                y: value}],
            borderColor: 'white',
            borderWidth: 0,
            innerSize: '81%',
            size: '55%',
            colors: color,
            dataLabels: {
                color: 'white',
                connectorWidth: 0,
                distance: 45,
                style: {"fontSize": "20px", "fontFamily":"Consolas"},
            },
            center: [350, 150],
            startAngle: 1+begin,
            endAngle: 1+end,}
        );
    }

    // and create the chart
    $(document).ready(function() {
        var chart = new Highcharts.Chart(options);
    });

    //]]>
</script>